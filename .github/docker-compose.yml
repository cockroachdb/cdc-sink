# This compose file contains recipes that are called from the GitHub
# Actions workflows. Host networking is used, because it simplifies
# the connectivity from the cockroach process back to the cdc-sink
# test rig.
version: "3.9"
services:
  cockroachdb-v20.2:
    image: cockroachdb/cockroach:latest-v20.2
    network_mode: host
    command: start-single-node --insecure
  cockroachdb-v21.1:
    image: cockroachdb/cockroach:latest-v21.1
    network_mode: host
    command: start-single-node --insecure
  cockroachdb-v21.2:
    image: cockroachdb/cockroach:latest-v21.2
    network_mode: host
    command: start-single-node --insecure
  postgresql-v11:
    image: postgres:11
    environment:
      POSTGRES_PASSWORD: SoupOrSecret
    ports:
      - "5432:5432"
    command:
      - postgres
      - -c
      - wal_level=logical
  postgresql-v12:
    image: postgres:12
    environment:
      POSTGRES_PASSWORD: SoupOrSecret
    ports:
      - "5432:5432"
    command:
      - postgres
      - -c
      - wal_level=logical
  postgresql-v13:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: SoupOrSecret
    ports:
      - "5432:5432"
    command:
      - postgres
      - -c
      - wal_level=logical
  postgresql-v14:
    image: postgres:14
    environment:
      POSTGRES_PASSWORD: SoupOrSecret
    ports:
      - "5432:5432"
    command:
      - postgres
      - -c
      - wal_level=logical
